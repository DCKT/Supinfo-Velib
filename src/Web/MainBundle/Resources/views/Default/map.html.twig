{% extends "WebMainBundle::layout.html.twig" %}

{% block body %}
	{% for flashMessage in app.session.flashbag.get('notice') %}
	    <div class="alert alert-danger" style="margin-top: 10px">
	        {{ flashMessage }}
	        <button type="button" class="close" data-dismiss="alert">&times;</button>
	    </div>
	{% endfor %}

	{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
	  	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDp96hrrsl5Guz4pm0R3AzSOKUUm0HzFJQ&sensor=false"></script>
	  	<script src="{{ asset('js/velib.js') }}" type="text/javascript"></script>

		<div class="row-fluid">
			<div id="map" class="span12">
				Afin d'afficher la carte de Google, vous devez activer Javascript.
			</div>
			<div id="route" style="margin-left:auto;margin-right:auto;width:900px"></div>
		</div>	

		<div class="row-fluid" id="itineraire-form">
			<form action="#" method="post">
				<strong style="font-size:20px;">Start: </strong>
				<input id="start" type="text" value="" >
				<strong style="font-size:20px;margin-left:20px;">End: </strong>
				<input id="end" type="text" value="" >
				<input id="send" class="btn btn-warning" style="margin-top:-10px;width:60px;" onclick="javascript:calcRoute()" value="Send" >
				
				<input id="btnStart" class="btn btn-success" style="margin-top:-10px;width:60px;" onclick="javascript:recupStart()" value="Start" >
				<input id="btnEnd" class="btn btn-info" style="margin-top:-10px;width:60px;" onclick="javascript:recupEnd()" value="End" >
			</form>
		</div>
	
	
		<div class="span12 offset5">
			<legend>Station sélectionnée :</legend>	
			{% if stationCurrent %}
				<input id="latitude" type="text" style="display:none;" value="{{ stationCurrent.latitude }}" >
				<input id="longitude" type="text" style="display:none;" value="{{ stationCurrent.longitude }}" >
			{% endif %}

		{% if form %}
				<form action="{{ path('add_favori') }}" method="post" {{form_enctype(form) }} >
					<table class="table table-bordered" id="table-selected">
						<tr>
							<td style="display:none">
								{{ form_widget(form.nomStation, {'attr' : {'class' : 'uneditable-input'}}) }}
								{{ form_widget(form.slugNomStation, {'attr' : {'class' : 'uneditable-input'}}) }}
								{{ form_widget(form.latitude, {'attr' : {'class' : 'uneditable-input'}}) }}
								{{ form_widget(form.longitude, {'attr' : {'class' : 'uneditable-input'}}) }}
							</td>
						</tr>
					</table>
				</form>
			</div>
		{% endif %}

	{% else %}
		<h1 class="alert">Connexion requise</h1>
	{% endif %}
		</div>
	<script type="text/javascript">
		$(document).ready(function() {
			$(".container").removeClass();
			$("#content").removeClass("span12");
		});
	</script>
{% endblock %}